//**************************************************************************************************
// @Module  SSD1306 I2C display test Driver
//! \file   SSD1306_drv.c
//! \brief  Basic interface of the SSD1306 I2C display Driver.
//! \par    History
//! | Date       | Author  | Comment
//! |:----------:|:-------:|------------------------------------------------------------------------
//! | 03.09.2025 |   MAY   | First release.
//**************************************************************************************************


#include "SSD1306_drv.h"
#include "pish_i2c_drv.h"

// внутренние константы
#define OLED_WIDTH 128
#define OLED_HEIGHT_32 0x02
#define OLED_HEIGHT_64 0x12
#define OLED_64 0x3F
#define OLED_32 0x1F

#define OLED_DISPLAY_OFF 0xAE
#define OLED_DISPLAY_ON 0xAF

#define OLED_COMMAND_MODE 0x00
#define OLED_ONE_COMMAND_MODE 0x80
#define OLED_DATA_MODE 0x40
#define OLED_ONE_DATA_MODE 0xC0

#define OLED_ADDRESSING_MODE 0x20
#define OLED_HORIZONTAL 0x00
#define OLED_VERTICAL 0x01

#define OLED_NORMAL_V 0xC8
#define OLED_FLIP_V 0xC0
#define OLED_NORMAL_H 0xA1
#define OLED_FLIP_H 0xA0

#define OLED_CONTRAST 0x81
#define OLED_SETCOMPINS 0xDA
#define OLED_SETVCOMDETECT 0xDB
#define OLED_CLOCKDIV 0xD5
#define OLED_SETMULTIPLEX 0xA8
#define OLED_COLUMNADDR 0x21
#define OLED_PAGEADDR 0x22
#define OLED_CHARGEPUMP 0x8D

#define OLED_NORMALDISPLAY 0xA6
#define OLED_INVERTDISPLAY 0xA7

#define BUFSIZE_128x64 (128 * 64 / 8)
#define BUFSIZE_128x32 (128 * 32 / 8)

#define SSD1306_ADDR (0x3C)
#define SSD1306_I2C_BUS (0x00)

#define SSD1306_INIT_COMMANDS_SIZE (8U)

static const U8 SSD1306_init_commands[SSD1306_INIT_COMMANDS_SIZE]  = {
    OLED_DISPLAY_OFF,
//    OLED_CLOCKDIV,
//    0x80,  // value
    OLED_CHARGEPUMP,
    0x14,  // value
    OLED_ADDRESSING_MODE,
    OLED_VERTICAL,
    OLED_NORMAL_H,
    OLED_NORMAL_V,
//    OLED_CONTRAST,
//    0x7F,  // value
//    OLED_SETVCOMDETECT,
//    0x40,  // value
//    OLED_NORMALDISPLAY,
    OLED_DISPLAY_ON,
//    OLED_SETCOMPINS,
//    OLED_HEIGHT_64,
//    OLED_SETMULTIPLEX,
//    OLED_64,
};



void SSD1306_SetWindow(void);

void SSD1306_Init(void)
{
//    I2C_Write(SSD1306_I2C_BUS, SSD1306_init_commands, SSD1306_INIT_COMMANDS_SIZE);


	I2C_Start();
	// Передача адреса с запросом на запись
	I2C_Select(SSD1306_ADDR, 0);

	I2C_Write(OLED_COMMAND_MODE);

	for (int i =0; i < SSD1306_INIT_COMMANDS_SIZE; i++)
	{
		I2C_Write(SSD1306_init_commands[i]);
	}

	I2C_Stop();
    SSD1306_SetWindow();


    //SSD1306_Fill(0xAA);
}

void SSD1306_Clear(void)
{
    SSD1306_Fill(0U);
}

void SSD1306_Fill(U8 pixels_8)
{
    SSD1306_SetWindow();

    const U16 data_size = 1024;
    U8 data[1024];

    for (U8 index = 0; index < data_size; index++)
    {
        data[index] = pixels_8;
    }

	I2C_Start();
	// Передача адреса с запросом на запись
	I2C_Select(SSD1306_ADDR, 0);

	I2C_Write(OLED_DATA_MODE);

	for (int i =0; i < 255*4; i++)
	{
		I2C_Write(0x55);
	}

	I2C_Stop();

//    stConfigSlave.nAddrReg = OLED_DATA_MODE;
//
//    for (U8 i = 0; i < 4; i++)
//    {
//
//        I2C_Write(SSD1306_I2C_BUS, &data[255*i], 255);
//
//    }
}

void SSD1306_Picture2(void)
{
    SSD1306_SetWindow();
    U8 data[1024] = {
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0x87, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x43, 0xfe, 0xff, 0xff, 0xfb, 0xff, 0xff, 0xff, 0x81, 0xfc, 0xff, 0xff, 0xf9, 0xff, 0xff,
    		0xff, 0x81, 0xfa, 0xff, 0xbf, 0xfd, 0xff, 0xff, 0xff, 0x02, 0xf1, 0xff, 0xbf, 0xfc, 0xff, 0xff, 0x9f, 0x00, 0xc5, 0xff, 0x9f, 0xfd, 0xff, 0xff,
    		0x0f, 0x01, 0x9a, 0xff, 0x9f, 0xfd, 0xff, 0xff, 0x1f, 0x08, 0x3a, 0xff, 0x7f, 0xdd, 0xff, 0xff, 0x17, 0x08, 0x78, 0xff, 0x7f, 0xc5, 0xff, 0xff,
    		0x03, 0x00, 0xf4, 0xfe, 0x1f, 0xe9, 0xff, 0xff, 0x03, 0x00, 0xf4, 0xfc, 0x1f, 0xf4, 0xff, 0xff, 0x03, 0x02, 0xe4, 0xfd, 0x07, 0xfa, 0xff, 0xff,
    		0x03, 0x02, 0xe8, 0x71, 0x02, 0xfa, 0xff, 0xff, 0x07, 0x02, 0xd8, 0x8b, 0x00, 0xfc, 0xff, 0xff, 0x07, 0x01, 0x90, 0x3b, 0x00, 0xfc, 0xff, 0xff,
    		0x8f, 0x20, 0xb0, 0x77, 0x00, 0xfc, 0xf7, 0xff, 0x1f, 0x60, 0xa0, 0xf7, 0x41, 0xfe, 0xf7, 0xff, 0x5f, 0xd6, 0xa0, 0xff, 0x63, 0x7e, 0xf3, 0xff,
    		0x5f, 0xc2, 0xa0, 0xff, 0xf3, 0x3f, 0xf3, 0xff, 0x5f, 0xe0, 0x20, 0xff, 0xe7, 0x3c, 0xff, 0xff, 0x5f, 0x56, 0x20, 0xfe, 0xef, 0xfd, 0xfc, 0xff,
    		0x1f, 0x24, 0xc0, 0xfd, 0xdf, 0xff, 0x74, 0xff, 0xbf, 0x1c, 0xc7, 0xfd, 0x9f, 0x7f, 0x91, 0xff, 0x7f, 0x02, 0x86, 0xd8, 0xbf, 0x7f, 0xc0, 0xff,
    		0xff, 0x60, 0x00, 0x00, 0x3e, 0x7f, 0xd0, 0xff, 0xff, 0x81, 0x00, 0x00, 0x7c, 0x7f, 0xe8, 0xff, 0xff, 0x01, 0x0e, 0x00, 0x78, 0x3e, 0xe0, 0xff,
    		0xff, 0x13, 0x00, 0x08, 0xf0, 0x9e, 0xf4, 0xff, 0xff, 0x03, 0x18, 0x00, 0xf0, 0x20, 0xf4, 0xff, 0xff, 0x07, 0x00, 0x10, 0xe0, 0x04, 0xf0, 0xff,
    		0xff, 0x07, 0x00, 0x00, 0x10, 0x00, 0xf8, 0xff, 0xff, 0x07, 0x00, 0x20, 0x40, 0x00, 0xfd, 0xff, 0xff, 0x07, 0x02, 0x40, 0x20, 0x00, 0xfe, 0xff,
    		0xff, 0x07, 0x40, 0x40, 0x00, 0x00, 0xff, 0xff, 0xff, 0x47, 0x00, 0x88, 0x00, 0x80, 0xff, 0xff, 0xff, 0x07, 0x00, 0x00, 0x01, 0xc8, 0xff, 0xff,
    		0xff, 0x0f, 0x00, 0x00, 0x02, 0xe4, 0xff, 0xff, 0xff, 0x1f, 0x08, 0x00, 0x04, 0xeb, 0xff, 0xff, 0xff, 0x1f, 0x00, 0x02, 0xf8, 0xec, 0xff, 0xff,
    		0xff, 0x1f, 0x00, 0x10, 0x00, 0xec, 0xff, 0xff, 0xff, 0x1f, 0x00, 0x00, 0x01, 0xec, 0xfe, 0xff, 0xff, 0x1f, 0x00, 0x00, 0x00, 0xe8, 0xfe, 0xff,
    		0xff, 0x3f, 0x00, 0x00, 0x00, 0xe8, 0xde, 0xff, 0xff, 0x3f, 0x20, 0x00, 0x20, 0xe0, 0xce, 0xff, 0xff, 0x7f, 0x00, 0x00, 0x00, 0xe4, 0xee, 0xff,
    		0xff, 0xff, 0x00, 0x44, 0x00, 0xe0, 0xed, 0xff, 0xff, 0xff, 0x04, 0x04, 0x00, 0xce, 0xe9, 0xff, 0xff, 0xff, 0x00, 0x00, 0xc0, 0xb1, 0xf0, 0xff,
    		0xff, 0xff, 0x01, 0x00, 0x30, 0x40, 0xf4, 0xff, 0xff, 0xff, 0x01, 0x00, 0x18, 0x00, 0xf4, 0xff, 0xff, 0xff, 0x07, 0x40, 0x0c, 0x80, 0xf4, 0xff,
    		0xff, 0xff, 0x0f, 0x00, 0x04, 0x00, 0x24, 0xff, 0xff, 0xff, 0x1f, 0x10, 0x02, 0x00, 0xa0, 0xff, 0xff, 0xff, 0x3f, 0x01, 0x00, 0x00, 0xd0, 0xff,
    		0xff, 0xff, 0x7f, 0x00, 0x01, 0x00, 0xe8, 0xff, 0xff, 0xff, 0xff, 0x10, 0x00, 0x80, 0xe4, 0xff, 0xff, 0xff, 0xff, 0x81, 0x00, 0x80, 0xf0, 0xff,
    		0xff, 0xff, 0xff, 0x03, 0x00, 0x00, 0xf2, 0xff, 0xff, 0xff, 0xff, 0x07, 0x00, 0x40, 0xf8, 0xff, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0xf8, 0xff,
    		0xff, 0xff, 0xff, 0x3f, 0x00, 0x00, 0xfc, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x00, 0x20, 0xfc, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x00, 0x18, 0xfe, 0xff,
    		0xff, 0xff, 0xff, 0x7f, 0x00, 0x06, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x00, 0xc1, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x00, 0xe0, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0x7f, 0x00, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
    		0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
    	};

//    for (U8 index = 0; index < data_size; index++)
//    {
//        data[index] = pixels_8;
//    }

	I2C_Start();
	// Передача адреса с запросом на запись
	I2C_Select(SSD1306_ADDR, 0);

	I2C_Write(OLED_DATA_MODE);

	for (int i = 0; i < 255*4; i++)
	{
		I2C_Write(data[i]);
	}

	I2C_Stop();


//    stConfigSlave.nAddrReg = OLED_DATA_MODE;
//
//    for (U8 i = 0; i < 4; i++)
//    {
//        I2C_Write(SSD1306_I2C_BUS, &data[255*i], 255);
//    }
//
//    I2C_Write(SSD1306_I2C_BUS, &data[1020], 4);

}

void SSD1306_Picture(void)
{
    SSD1306_SetWindow();

    U8 data[1024] = {
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x1f, 0x00, 0xfc,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xcf, 0xfb, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xcf, 0xf9, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0x9f, 0xf9, 0xfd,
             0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0xe0, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0f, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x1f, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xfd,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaf, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0x00, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0b, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x9f, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x4f, 0xfd,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x6f, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x9f, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x6f, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xef, 0xfe,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0b, 0xfc,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfb, 0x0f, 0xfc,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xe1, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf8, 0xcf, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xf8, 0x9f, 0xff,
             0xff, 0xff, 0xff, 0xff, 0x3f, 0xfe, 0x9f, 0xff, 0xff, 0xff, 0xff, 0xff, 0x1f, 0xfc, 0xcf, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0f, 0xff, 0x0f, 0xfc,
             0xff, 0xff, 0xff, 0xff, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe1, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf2, 0xff, 0x1f, 0xfe,
             0xff, 0xff, 0xff, 0x7f, 0xf0, 0xff, 0xef, 0xfd, 0xff, 0xff, 0x0f, 0x00, 0xfe, 0xff, 0xef, 0xfd, 0xff, 0xff, 0xf3, 0xff, 0xff, 0xff, 0xef, 0xfd,
             0xff, 0xff, 0x1c, 0xfe, 0x3f, 0xff, 0x1f, 0xfe, 0xff, 0x7f, 0x01, 0xfc, 0xff, 0xfc, 0xff, 0xff, 0xff, 0xbf, 0x00, 0xf8, 0xff, 0xf3, 0xff, 0xff,
             0xff, 0xbf, 0x00, 0xfc, 0xff, 0xf7, 0xff, 0xff, 0xff, 0xbf, 0x00, 0xfe, 0xff, 0xef, 0xff, 0xff, 0xff, 0xbf, 0x01, 0xff, 0xff, 0xef, 0xff, 0xff,
             0xff, 0x7f, 0x83, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xc6, 0xdf, 0xf7, 0xff, 0xff, 0xff, 0xff, 0xff, 0xce, 0xdf, 0xef, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xfd, 0x9f, 0xe3, 0x9f, 0xff, 0xff, 0xff, 0xff, 0xf9, 0xff, 0x9f, 0x7f, 0xfe, 0xff, 0xff, 0xff, 0xfd, 0xe7, 0xf7, 0xff, 0xfc, 0xff,
             0xff, 0xff, 0xfd, 0xcf, 0xed, 0xff, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xcf, 0xc1, 0xff, 0xfd, 0xff, 0xff, 0xff, 0xfe, 0x87, 0xc1, 0xff, 0xfb, 0xff,
             0x1f, 0xff, 0xfe, 0x87, 0xdd, 0x3f, 0xfa, 0xff, 0x63, 0xfe, 0xfe, 0xc7, 0xcd, 0xff, 0xfb, 0xff, 0x7d, 0x3e, 0xfe, 0xcf, 0xd1, 0xe3, 0xfb, 0xff,
             0xbd, 0xc0, 0xfe, 0x8f, 0xc3, 0xef, 0x0a, 0xff, 0xbd, 0x7f, 0xfe, 0xcf, 0xf7, 0xef, 0xfa, 0xf8, 0xbd, 0xff, 0xfe, 0xff, 0xff, 0xef, 0xfa, 0xe7,
             0xbd, 0xff, 0xfe, 0xff, 0xff, 0xef, 0xfa, 0xff, 0xbd, 0xff, 0xfe, 0xff, 0x1f, 0x6c, 0xfa, 0xff, 0xbd, 0xff, 0xfe, 0xbf, 0xef, 0x33, 0xfd, 0xff,
             0xbd, 0xff, 0xfe, 0xc0, 0xf7, 0xff, 0xfd, 0xff, 0xbb, 0xff, 0xfe, 0xc7, 0xf7, 0xff, 0xfe, 0xff, 0xbb, 0xff, 0xfd, 0xdf, 0xff, 0x7f, 0xff, 0xff,
             0x7b, 0xff, 0xfc, 0xcf, 0x9b, 0x3f, 0xff, 0xff, 0x73, 0x0f, 0xfd, 0xcf, 0x83, 0xcf, 0xff, 0xff, 0xef, 0xf0, 0xfb, 0xcf, 0xb9, 0xf7, 0xff, 0xff,
             0x8f, 0xf7, 0xf7, 0xcf, 0xa9, 0xf3, 0xff, 0xff, 0x7f, 0xf4, 0xfb, 0x8f, 0xa9, 0xfb, 0xff, 0xff, 0xff, 0xfb, 0xfb, 0x9f, 0xc1, 0xfb, 0xf1, 0xff,
             0xff, 0xff, 0xdf, 0xff, 0xe3, 0xfd, 0xee, 0xff, 0xff, 0xff, 0xed, 0xff, 0xff, 0x7c, 0xdb, 0xff, 0xff, 0xff, 0xed, 0xff, 0x3f, 0x7f, 0xd5, 0x0f,
             0xff, 0xff, 0xf5, 0xff, 0xc7, 0x7f, 0x15, 0xf8, 0xff, 0xff, 0x66, 0xfe, 0xf8, 0x7f, 0xf4, 0xff, 0xff, 0xff, 0x86, 0x1f, 0xff, 0x7f, 0xf5, 0xff,
             0xff, 0xff, 0xe6, 0xe3, 0xff, 0x7f, 0xf5, 0xff, 0xff, 0xff, 0xfe, 0xf1, 0xff, 0x7f, 0xfb, 0x1f, 0xff, 0xff, 0x1e, 0xfe, 0xff, 0x7f, 0x3f, 0xe0,
             0xff, 0xff, 0xe1, 0xff, 0xff, 0xff, 0xd6, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xd1, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xd5, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xd5, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc3, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
             0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
        };

//    for (U8 index = 0; index < data_size; index++)
//    {
//        data[index] = pixels_8;
//    }

	I2C_Start();
	// Передача адреса с запросом на запись
	I2C_Select(SSD1306_ADDR, 0);

	I2C_Write(OLED_DATA_MODE);

	for (int i = 0; i < 255*4; i++)
	{
		I2C_Write(data[i]);
	}

	I2C_Stop();

//    stConfigSlave.nAddrReg = OLED_DATA_MODE;
//
//    for (U8 i = 0; i < 4; i++)
//    {
//        nFuncResult = I2C_Write(SSD1306_I2C_BUS, &data[255*i], 255);
//    }
//
//    I2C_Write(SSD1306_I2C_BUS, &data[1020], 4);
}


void SSD1306_SetWindow(void)
{
	const U8 windowCommands[] = {OLED_COLUMNADDR, 0, 127, OLED_PAGEADDR, 0, 7};

	I2C_Start();
	// Передача адреса с запросом на запись
	I2C_Select(SSD1306_ADDR, 0);

	I2C_Write(OLED_COMMAND_MODE);

	for (int i =0; i < 6; i++)
	{
		I2C_Write(windowCommands[i]);
	}

	I2C_Stop();
//
//    stConfigSlave.nAddrReg = OLED_COMMAND_MODE;
//
//
//
//    I2C_Write(SSD1306_I2C_BUS, windowCommands, 6U);
}
